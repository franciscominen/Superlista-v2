import type { NextPage } from 'next'
import Link from 'next/link'
import Head from 'next/head'
import Image from 'next/image'
import ClearListModal from '~/ui/components/ClearListModal'
import { useList } from '~/lib/hooks'
import { SpacedContainer } from '~/ui/styles/sharedStyles'
import styled from 'styled-components'
import { useRouter } from 'next/router'

const HomeContainer = styled.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 70vh;
`

const HomeButton = styled.button`
  background-color: var(--white);
  border: 2px solid #D2D2D2;
  border-radius: 20px;
  min-width: 160px;
  max-width: 185px;
  width: 100%;
  min-height: 160px;
  max-height: 185px;
  height: 100%;
  object-fit: contain;
`

const HomeText = styled.p`
  font-size: 15px;
  margin: 8px 0 0 0;
`

const ImageWrapper = styled.div`
  position: "relative";
  width: 250px;
  max-width: 250px;
  height: 50px;
  max-height: 50px;
  margin-bottom: 2em;
`

const Home: NextPage = () => {
  const list = useList()
  const router = useRouter()

  const modalButton = (
    <>
      <HomeButton>
        <Image
          src="/assets/new-list-btn.svg"
          alt='+'
          width={78}
          height={78}
        />
        <HomeText><strong>Crear nueva</strong> Lista</HomeText>
      </HomeButton>
    </>
  )

  return (
    <>
      <Head>
        <title>Superlista.ar</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <HomeContainer>

        <ImageWrapper>
          <Image
            priority
            src='/assets/logo-navbar.svg'
            alt='Superlista.ar'
            layout="responsive"
            width={250}
            height={50}
          />
        </ImageWrapper >

        <SpacedContainer style={{ marginBottom: '20px' }}>
          {
            !list.length ?
              (
                <HomeButton onClick={() => { router.push('/mylist') }}>
                  <Image
                    src="/assets/new-list-btn.svg"
                    alt='+'
                    width={78}
                    height={78}
                  />
                  <HomeText><strong>Crear nueva</strong> Lista</HomeText>
                </HomeButton>
              )
              :
              <ClearListModal modalIcon={modalButton} />
          }
          <HomeButton onClick={() => { router.push('/mylist') }}>
            <Image
              src="/assets/continue-btn.svg"
              alt='>'
              width={78}
              height={78}
            />
            <HomeText><strong>Continuar</strong> Lista</HomeText>
          </HomeButton>
        </SpacedContainer>

        <Link href='/'>
          <h3>Â¿Como funciona?</h3>
        </Link>
      </HomeContainer>
    </>
  )
}

export default Home
